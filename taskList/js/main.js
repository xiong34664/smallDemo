function diyModal(o,t,l){l?$("#Modal").find(".modal-footer").show():$("#Modal").find(".modal-footer").hide(),$("#Modal").find("h4").text(o).end().find(".modal-body").html(t)}$(window).load(function(){setTimeout(function(){$(".start").fadeOut(500)},500)}),$(function(){var e=[];$.each(localStorage,function(o,t){if(0===o.indexOf("note")){var l=o.split("-")[1],n=t.split("|");n.unshift(l),e.push(n)}}),e.length||(e[0]=["1","0","←选中时即为完成任务/任务标题","这是你的任务内容点击标题展开收起"],localStorage.setItem("note-1","0|←选中时即为完成任务/任务标题|这是你的任务内容点击标题展开收起"),console.log(e));var o=template("note-list",{items:e});$("#accordion").html(o),$(".btn-add").on("click",function(){diyModal("新建任务",'<form>\n          <div class="form-group">\n             <label for="title" class="control-label">标题:</label>\n             <input type="text" class="form-control" id="title">\n          </div>\n          <div class="form-group">\n             <label for="content" class="control-label">内容:</label>\n             <textarea class="form-control" id="content"></textarea>\n          </div>\n        </form>',!0),$("#Modal").modal("show"),$(".btn-ok").off("click"),$(".btn-ok").on("click",function(){var o=0;0!==e.length&&(o=e[e.length-1][0]-0+1);var t=$("#title").val(),l=$("#content").val();localStorage.setItem("note-"+o,"0|"+t+"|"+l),$("#title").val(""),$("#content").val("");var n=[[o,0,t,l]];e.push([o,0,t,l]);var a=template("note-list",{items:n});$("#accordion").append(a),setTimeout(function(){diyModal("提示","添加成功",!1),$("#Modal").modal("show")},1e3)})}),$(".btn-empty").on("click",function(){diyModal("提示","是否确认删除全部",!0),$("#Modal").modal("show"),$(".btn-ok").off("click"),$(".btn-ok").on("click",function(){localStorage.clear(),setTimeout(function(){diyModal("提示","全部删除成功",!1),$("#Modal").modal("show"),$(".panel-group").html("")},1e3)})}),$("#accordion").on("click",".close",function(){var o=$(this).parents(".panel");return localStorage.removeItem("note-"+o.attr("data-id")),o.remove(),diyModal("提示","删除成功",!1),$("#Modal").modal("show"),!1}),$("#accordion").on("change",".checkbox",function(){var o=$(this).prop("checked")?1:0,t=$(this).parents(".panel"),l="note-"+t.attr("data-id"),n=localStorage.getItem(l).split("|");return n[0]=o,localStorage.setItem(l,n.join("|")),t.toggleClass("panel-info"),!1})});